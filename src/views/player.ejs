<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BsmTracker Player</title>
  </head>
  <body
    style="
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    "
  >
    <h1 style="font-size: 50px">BsmTracker Player</h1>
    <p>소켓을 통해서 노래 재생 명령을 받아 플레이합니다</p>
    <p>소켓을 통해서 노래 중지 명령을 받아 중지합니다</p>
    <p>1. 라즈베리파이에 해당 페이지를 설치합니다</p>
    <p>2. 해당페이지 권한에서 소리 설정을 허용으로 변환해야합니다</p>
    <img src="/uploads/yes.png" />
  </body>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io.connect('/player');
    let currentAudio = null;

    socket.on('pause', function () {
      if (currentAudio) {
        currentAudio.pause();
      }
      currentAudio = null;
    });

    socket.on('play', function (data) {
      if (currentAudio) {
        currentAudio.pause();
      }
      console.log(data.src);
      currentAudio = new Audio(data.src);
      currentAudio.currentTime = 0;
      currentAudio.play();
    });
  </script>
</html>
